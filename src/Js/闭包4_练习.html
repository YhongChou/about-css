<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
    // 1
    function fn1() {
        var a = 2;
        function fn2() {
            console.log(a) //2
        }
        fn2();
    }
    fn1();

    // 2
    var name = 'window';
    var object = {
        name: 'object',
        // 没有形成闭包
        // 虽然有函数嵌套，但是内部函数没有引用外部变量
        getName: function() {
            return function() {
                return this.name
            }
        }
    }
    // object.getName()得到的是一个函数,所以object.getName()()
    // 所以是this指向window
    console.log(object.getName()); // window

    // 3
    var name = 'window';
    var object = {
        name: 'object',
        // 形成闭包 闭包就是that
        getName: function() {
            var that = this; // object.getName() this指向object
            return function() {
                return that.name // 形成闭包
            }
        }
    }
    // object.getName()得到的是一个函数,所以object.getName()()
    // 所以是this指向window
    console.log(object.getName()); // object

    // 4
    function fun(n, o) {
        console.log(n, o);
        return {
            fun: function(m) {
                return fun(m, n) // 指向全局的fun(n, o)
            }
        }
    }
    var a = fun(0);
    a.fun(1);
    a.fun(2);
    a.fun(3);
    var b = fun(0).fun(1).fun(2).fun(3);
    var c = fun(0).fun(1);
    c.fun(2);
    c.fun(3);
    </script>
</body>
</html>
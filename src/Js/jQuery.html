<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <ul>
        <li class="box">1</li>
        <li class="box">2</li>
        <li class="box2">3</li>
    </ul>
    <script>
        function JQuery(selector) {
            // 是一个伪数组
            const dom = document.querySelectorAll(selector);
            console.log('dom', dom);
            // 会把数组从原型继承来的方法也给遍历出来，遍历时可添加 hasOwnProperty()方法来过滤掉非自有属性
            // for (let item in dom) {
            //     console.log('item', dom[item]);
            //     this[item] = dom[item];
            // }
            for (let i = 0; i < dom.length; i++) {
                this[i] = dom[i];
            }
            this.length = dom.length
            // return this;
        }

        // 封装$选择器
        function $(selector) {
            return new JQuery(selector);
        }

        JQuery.prototype.css = function(prop, value) {
            if (arguments.length === 2) {
                for (let i = 0; i < this.length; i++) {
                    this[i].style[prop] = value;
                }
            } else if (arguments.length === 1) {
                for (let key in prop) {
                    for (let i = 0; i < this.length; i++) {
                        this[i].style[key] = prop[key];
                    }
                }
            }
        }

        JQuery.prototype.on = function(type, fn) {
            // 给每一个元素添加事件
            for (let i = 0; i < this.length; i++) {
                // 只有在高级浏览器才是function
                if (typeof this[i].addEventListener === "function") {
                    this[i].addEventListener(type, fn)
                } else {
                    this[i].attachEvent("on"+type, fn)
                }
                
            }
        }

        // const res = new JQuery(".box");
        // const res2 = $(".box");
        $(".box").css({"color": "pink", "backgroud": "blue"});
        $(".box").on("click", function(e) {
            console.log('点击了li');
            const event = e || window.event;
            // e.srcElement表示事件源 点击到的dom元素 
            event.srcElement.style.background = "pink";
        });

        console.log('JQuery.prototype', JQuery.prototype);

        console.log('$(".box")', $(".box"));
        console.log($(".box").__proto__);
        console.log($(".box").__proto__ === JQuery.prototype);
        console.log(JQuery instanceof Object);

        


        // console.log('res', res);

    </script>
    
</body>
</html>